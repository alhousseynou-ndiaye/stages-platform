<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <title>D√©tails offre</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 900px;
        margin: auto;
        padding: 20px;
      }

      h1 {
        color: #2c3e50;
      }

      .section {
        margin-bottom: 20px;
      }

      .btn {
        display: inline-block;
        padding: 8px 14px;
        background: #3498db;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        margin-right: 10px;
      }

      .btn:hover {
        background: #2980b9;
      }

      .btn-danger {
        background: #e74c3c;
      }

      .btn-danger:hover {
        background: #c0392b;
      }

      .info {
        background: #f8f9fa;
        padding: 10px;
        border-left: 4px solid #3498db;
        margin-bottom: 15px;
      }
    </style>
  </head>

  <body>
    <h1>{{ offre.titre }}</h1>

    <div class="info">
      <p><b>Entreprise :</b> {{ offre.entreprise.raison_sociale }}</p>
      <p><b>Lieu :</b> {{ offre.lieu }}</p>
      <p><b>Dur√©e :</b> {{ offre.duree_mois }} mois</p>
      <p><b>Date d√©but :</b> {{ offre.date_debut }}</p>
      <p><b>Statut :</b> {{ offre.statut }}</p>
    </div>

    <div class="section">
      <p>
        <b>R√©mun√©ration :</b>
        {% if offre.remuneration %} {{ offre.remuneration }} ‚Ç¨ {% else %} - {%
        endif %}
      </p>

      <p>
        <b>Fili√®re :</b>
        {% if offre.filiere_cible %} {{ offre.filiere_cible }} {% else %} - {%
        endif %}
      </p>
    </div>

    <div class="section">
      <h3>Description</h3>
      <p>{{ offre.description|linebreaks }}</p>
    </div>

    <div class="section">
      <h3>Missions</h3>
      <p>{{ offre.missions|linebreaks }}</p>
    </div>

    <div class="section">
      <h3>Profil recherch√©</h3>
      <p>{{ offre.profil_recherche|linebreaks }}</p>
    </div>

    <div class="section">
      <h3>Pi√®ces jointes</h3>

      <ul>
        {% for pj in offre.pieces_jointes.all %}
        <li>
          <a href="{{ pj.fichier.url }}">
            {{ pj.label|default:pj.fichier.name }}
          </a>
        </li>
        {% empty %}
        <li>Aucune pi√®ce jointe.</li>
        {% endfor %}
      </ul>
    </div>

    <hr />

    <!-- ================== ACTIONS ================== -->

    <div class="section">
      <!-- √âtudiant -->
      {% if request.user.role|lower == "etudiant" and offre.statut|lower ==
      "publiee" %}

      <a href="{% url 'postuler' offre.pk %}" class="btn"> üì© Postuler </a>

      <a href="{% url 'mes_candidatures' %}" class="btn">
        üìÑ Mes candidatures
      </a>

      {% endif %}

      <!-- Admin / Responsable -->
      {% if request.user.role|lower == "admin" or request.user.role|lower ==
      "resp_pedago" %}

      <a href="{% url 'candidatures_offre' offre.pk %}" class="btn">
        üì• Voir candidatures
      </a>

      {% if offre.statut|lower != "archivee" %}
      <a href="{% url 'offre_archive' offre.pk %}" class="btn btn-danger">
        üóÑÔ∏è Archiver
      </a>
      {% endif %} {% endif %}
    </div>

    <hr />

    <p>
      <a href="{% url 'offre_list' %}">‚¨Ö Retour √† la liste</a>
    </p>
  </body>
</html>
